(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8482d206"],{"51b1":function(t,o,r){"use strict";r("8669")},7856:function(t,o,r){"use strict";r.r(o);var a=function(){var t=this,o=t._self._c;return o("div",{staticClass:"page_account forgot",attrs:{id:"account_forgot"}},[o("div",{staticClass:"warp forgot_warp"},[o("div",{staticClass:"container"},[o("div",{staticClass:"row row_forgot"},[t._m(0),o("div",{staticClass:"forget_container"},[o("div",{staticClass:"form_box"},[o("b-form",{staticClass:"forms"},[o("b-form-group",{attrs:{id:"input-group-1",label:"用户名:","label-for":"input-1",state:t.validation_username,"invalid-feedback":"账户名长度为在5-16个字符","valid-feedback":"校验通过"}},[o("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"请输入用户名",trim:""},model:{value:t.form.username,callback:function(o){t.$set(t.form,"username",o)},expression:"form.username"}})],1),o("b-form-group",{attrs:{id:"input-group-2",label:"密码:","label-for":"input-2",state:t.validation_password,"invalid-feedback":"密码长度为在5-16个字符","valid-feedback":"校验通过"}},[o("b-form-input",{attrs:{id:"input-2",type:"password",placeholder:"请输入密码",trim:""},model:{value:t.form.password,callback:function(o){t.$set(t.form,"password",o)},expression:"form.password"}})],1),o("b-form-group",{attrs:{id:"input-group-2",label:"确认密码:","label-for":"input-2",state:t.validation_confirm_password,"invalid-feedback":"两次密码不一致","valid-feedback":"校验通过"}},[o("b-form-input",{attrs:{id:"input-2",type:"password",placeholder:"请再次输入密码",trim:""},model:{value:t.confirm_password,callback:function(o){t.confirm_password=o},expression:"confirm_password"}})],1),o("b-form-group",{attrs:{id:"input-group-2",label:"邮箱:","label-for":"input-2",state:t.validation_email,"invalid-feedback":"邮箱格式example@123.com","valid-feedback":""}},[o("b-form-input",{attrs:{id:"input-2",type:"email",placeholder:"请输入邮箱",trim:""},model:{value:t.form.email,callback:function(o){t.$set(t.form,"email",o)},expression:"form.email"}})],1),o("b-form-group",{attrs:{id:"input-group-2",label:"验证码:","label-for":"input-2",state:t.validation_code,"invalid-feedback":"验证码错误"}},[o("b-input-group",[o("b-form-input",{attrs:{id:"input-2",type:"text",placeholder:"请输入验证码",trim:""},model:{value:t.form.code,callback:function(o){t.$set(t.form,"code",o)},expression:"form.code"}}),o("b-input-group-append",[o("b-button",{staticClass:"btn",style:{paddingTop:"2px !important"},attrs:{variant:"success"},on:{click:function(o){return t.get_code()}}},[o("span",[t._v("发送验证码")])])],1)],1)],1)],1),o("div",{staticClass:"btns_bottom fg_bt"},[o("button",{staticClass:"btn_item btn",on:{click:function(o){return t.forgot()}}},[t._v("找回密码")]),o("button",{staticClass:"btn_login btn",on:{click:function(o){return t.$router.push("/account/login")}}},[o("span",[t._v("返回登录")])])])],1)]),t._m(1)])])])])},e=[function(){var t=this,o=t._self._c;return o("div",{staticClass:"t-box"},[o("span"),o("span"),o("span")])},function(){var t=this,o=t._self._c;return o("div",{staticClass:"b-box"},[o("span"),o("span"),o("span")])}],s={data(){return{form:{username:"",password:"",email:"",code:""},confirm_password:"",token:""}},onLoad(){},onReady(){},methods:{get_code(){if(!this.form.username)return void this.$toast("用户名不能为空!","error");if(!this.form.email)return void this.$toast("邮箱不能为空!","error");let t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(this.form.email&&!t.test(this.form.email))return void this.$toast("邮箱格式不正确 例：test@test.com","error");let o=this;o.$get("~/api/user/get_obj",{username:o.form.username},(function(t,r){t.result&&t.result.obj?t.result.obj.email===o.form.email?o.$get("~/api/code_token/send_email",{email:o.form.email},(function(t,r){t.result?(o.token=t.token,o.$toast("发送成功！","success")):t.error?o.$toast(t.error.message,"error"):o.$toast("服务器连接失败！")})):o.$toast("用户邮箱不正确！","error"):o.$toast("未找到用户！","error")}))},async forgot(){console.log(this.validation_username),console.log(this.validation_password),console.log(this.validation_confirm_password),console.log(this.validation_email),console.log(this.validation_code);var t=this.validation_username&&this.validation_password&&this.validation_confirm_password&&this.validation_email&&this.validation_code;if(!t)return void this.$toast("输入不合法","error");var o=Object.assign({},this.form);let r=await this.$get("~/api/code_token/verify_email_code",{token:this.token,code:o.code});r.result?this.$post("~/api/user/forget_password?",o,t=>{t.result?this.$router.push("/account/login"):t.error&&(console.log(t.error),this.$toast(t.error.message,"error"))}):r.error?this.$toast(r.error.message,"error"):this.$toast("服务器连接失败！","error")},resetForm(){this.$refs.form.resetFields()}},computed:{validation_username(){var t=this.form.username.length;return t?t>4&&t<17:null},validation_password(){var t=this.form.password.length;return t?t>4&&t<17:null},validation_confirm_password(){var t=this.confirm_password.length;return t?this.confirm_password===this.form.password:null},validation_email(){var t=this.form.email.length;return!t||t>4&&t<30},validation_code(){var t=this.form.code.length;return t?t>0:null}}},i=s,n=(r("51b1"),r("0b56")),l=Object(n["a"])(i,a,e,!1,null,"b727957e",null);o["default"]=l.exports},8669:function(t,o,r){}}]);