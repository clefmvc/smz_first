(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-147a2eeb"],{"0243":function(e,r,s){},"2d99":function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e._self._c;return r("div",{staticClass:"page_user",attrs:{id:"user_address"}},[r("div",{staticClass:"warp"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row justify-content-between"},[r("div",{staticClass:"col-12 col-md-3"},[r("div",{staticClass:"card_menu"},[r("list_admin_menu_user")],1)]),r("div",{staticClass:"col-12 col-md-9"},[r("div",{staticClass:"card_addres pl-2"},[e._m(0),e.$check_action("/repair_record/view","get")?r("view_repair_record"):e._e()],1)])])])])])},a=[function(){var e=this,r=e._self._c;return r("div",[r("span",[e._v("报修记录")])])}],i=s("bc88"),_=function(){var e=this,r=e._self._c;return r("el-main",{staticClass:"bg edit_wrap"},[e.is_view()?r("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"","label-width":"120px"}},[r("el-row",{staticClass:"row_ce"},[e.$check_field("get","ordinary_user")||e.$check_field("add","ordinary_user")||e.$check_field("set","ordinary_user")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"普通用户",prop:"ordinary_user"}},[e.form["repair_record_id"]&&e.$check_field("set","ordinary_user")||!e.form["repair_record_id"]&&e.$check_field("add","ordinary_user")?r("el-select",{attrs:{id:"ordinary_user",disabled:e.disabledObj["ordinary_user_isDisabled"]},model:{value:e.form["ordinary_user"],callback:function(r){e.$set(e.form,"ordinary_user",r)},expression:"form['ordinary_user']"}},e._l(e.list_user_ordinary_user,(function(e){return r("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e.$check_field("get","ordinary_user")?r("el-select",{attrs:{id:"ordinary_user",disabled:!0},model:{value:e.form["ordinary_user"],callback:function(r){e.$set(e.form,"ordinary_user",r)},expression:"form['ordinary_user']"}},e._l(e.list_user_ordinary_user,(function(e){return r("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e._e()],1)],1):e._e(),e.$check_field("get","user_name")||e.$check_field("add","user_name")||e.$check_field("set","user_name")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"用户姓名",prop:"user_name"}},[e.form["repair_record_id"]&&e.$check_field("set","user_name")||!e.form["repair_record_id"]&&e.$check_field("add","user_name")?r("el-input",{attrs:{id:"user_name",placeholder:"请输入用户姓名",disabled:e.disabledObj["user_name_isDisabled"]},model:{value:e.form["user_name"],callback:function(r){e.$set(e.form,"user_name",r)},expression:"form['user_name']"}}):e.$check_field("get","user_name")?r("div",[e._v(e._s(e.form["user_name"]))]):e._e()],1)],1):e._e(),e.$check_field("get","user_phone")||e.$check_field("add","user_phone")||e.$check_field("set","user_phone")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"用户电话",prop:"user_phone"}},[e.form["repair_record_id"]&&e.$check_field("set","user_phone")||!e.form["repair_record_id"]&&e.$check_field("add","user_phone")?r("el-input",{attrs:{id:"user_phone",placeholder:"请输入用户电话",disabled:e.disabledObj["user_phone_isDisabled"]},model:{value:e.form["user_phone"],callback:function(r){e.$set(e.form,"user_phone",r)},expression:"form['user_phone']"}}):e.$check_field("get","user_phone")?r("div",[e._v(e._s(e.form["user_phone"]))]):e._e()],1)],1):e._e(),e.$check_field("get","repair_title")||e.$check_field("add","repair_title")||e.$check_field("set","repair_title")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"报修标题",prop:"repair_title"}},[e.form["repair_record_id"]&&e.$check_field("set","repair_title")||!e.form["repair_record_id"]&&e.$check_field("add","repair_title")?r("el-input",{attrs:{id:"repair_title",placeholder:"请输入报修标题",disabled:e.disabledObj["repair_title_isDisabled"]},model:{value:e.form["repair_title"],callback:function(r){e.$set(e.form,"repair_title",r)},expression:"form['repair_title']"}}):e.$check_field("get","repair_title")?r("div",[e._v(e._s(e.form["repair_title"]))]):e._e()],1)],1):e._e(),e.$check_field("get","repair_address")||e.$check_field("add","repair_address")||e.$check_field("set","repair_address")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"报修地址",prop:"repair_address"}},[e.form["repair_record_id"]&&e.$check_field("set","repair_address")||!e.form["repair_record_id"]&&e.$check_field("add","repair_address")?r("el-input",{attrs:{type:"textarea",id:"repair_address",placeholder:"请输入报修地址",disabled:e.disabledObj["repair_address_isDisabled"]},model:{value:e.form["repair_address"],callback:function(r){e.$set(e.form,"repair_address",r)},expression:"form['repair_address']"}}):e.$check_field("get","repair_address")?r("div",[e._v(e._s(e.form["repair_address"]))]):e._e()],1)],1):e._e(),e.$check_field("get","fault_description")||e.$check_field("add","fault_description")||e.$check_field("set","fault_description")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"故障描述",prop:"fault_description"}},[e.form["repair_record_id"]&&e.$check_field("set","fault_description")||!e.form["repair_record_id"]&&e.$check_field("add","fault_description")?r("el-input",{attrs:{type:"textarea",id:"fault_description",placeholder:"请输入故障描述",disabled:e.disabledObj["fault_description_isDisabled"]},model:{value:e.form["fault_description"],callback:function(r){e.$set(e.form,"fault_description",r)},expression:"form['fault_description']"}}):e.$check_field("get","fault_description")?r("div",[e._v(e._s(e.form["fault_description"]))]):e._e()],1)],1):e._e(),e.$check_field("get","repair_date")||e.$check_field("add","repair_date")||e.$check_field("set","repair_date")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"报修日期",prop:"repair_date"}},[e.form["repair_record_id"]&&e.$check_field("set","repair_date")||!e.form["repair_record_id"]&&e.$check_field("add","repair_date")?r("el-date-picker",{attrs:{disabled:e.disabledObj["repair_date_isDisabled"],id:"repair_date",type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form["repair_date"],callback:function(r){e.$set(e.form,"repair_date",r)},expression:"form['repair_date']"}}):e.$check_field("get","repair_date")?r("div",[e._v(e._s(e.form["repair_date"]))]):e._e()],1)],1):e._e(),e.$check_field("get","maintenance_progress")||e.$check_field("add","maintenance_progress")||e.$check_field("set","maintenance_progress")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"维修进度",prop:"maintenance_progress"}},[e.form["repair_record_id"]&&e.$check_field("set","maintenance_progress")||!e.form["repair_record_id"]&&e.$check_field("add","maintenance_progress")?r("el-select",{attrs:{id:"maintenance_progress"},model:{value:e.form["maintenance_progress"],callback:function(r){e.$set(e.form,"maintenance_progress",r)},expression:"form['maintenance_progress']"}},e._l(e.list_maintenance_progress,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1):e.$check_field("get","maintenance_progress")?r("div",[e._v(e._s(e.form["maintenance_progress"]))]):e._e()],1)],1):e._e(),e.$check_field("get","progress_description")||e.$check_field("add","progress_description")||e.$check_field("set","progress_description")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"进度描述",prop:"progress_description"}},[e.form["repair_record_id"]&&e.$check_field("set","progress_description")||!e.form["repair_record_id"]&&e.$check_field("add","progress_description")?r("el-input",{attrs:{type:"textarea",id:"progress_description",placeholder:"请输入进度描述",disabled:e.disabledObj["progress_description_isDisabled"]},model:{value:e.form["progress_description"],callback:function(r){e.$set(e.form,"progress_description",r)},expression:"form['progress_description']"}}):e.$check_field("get","progress_description")?r("div",[e._v(e._s(e.form["progress_description"]))]):e._e()],1)],1):e._e()],1),r("el-col",{staticClass:"el_form_btn_warp",attrs:{xs:24,sm:12,lg:8}},[e.$check_action("/repair_record/view","set")||e.$check_action("/repair_record/view","add")||e.$check_option("/repair_record/table","examine")?r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submit()}}},[e._v("提交")]),r("el-button",{on:{click:function(r){return e.cancel()}}},[e._v("取消")])],1):r("el-form-item",[r("el-button",{on:{click:function(r){return e.cancel()}}},[e._v("返回")])],1)],1)],1):e._e()],1)},l=[],o=s("c6e7"),c={mixins:[o["a"]],data(){return{field:"repair_record_id",url_add:"~/api/repair_record/add?",url_set:"~/api/repair_record/set?",url_get_obj:"~/api/repair_record/get_obj?",url_upload:"~/api/repair_record/upload?",query:{repair_record_id:0},form:{ordinary_user:0,user_name:"",user_phone:"",repair_title:"",repair_address:"",fault_description:"",repair_date:"",maintenance_progress:"",progress_description:"",repair_record_id:0},disabledObj:{ordinary_user_isDisabled:!1,user_name_isDisabled:!1,user_phone_isDisabled:!1,repair_title_isDisabled:!1,repair_address_isDisabled:!1,fault_description_isDisabled:!1,repair_date_isDisabled:!1,maintenance_progress_isDisabled:!1,progress_description_isDisabled:!1},list_user_ordinary_user:[],list_maintenance_progress:["待维修","维修中","已完成"]}},methods:{async get_list_user_ordinary_user(){var e=await this.$get("~/api/user/get_list?user_group=普通用户");e.result&&e.result.list?this.list_user_ordinary_user=e.result.list:e.error&&console.error(e.error)},get_user_ordinary_user(e){var r=this.list_user_ordinary_user.getObj({user_id:e}),s="";return r&&(s=r.nickname?r.nickname:r.username),s},get_obj_before(e){var r="";return r=$.db.get("form"),$.push(this.form,r),this.form&&r&&Object.keys(this.form).forEach(e=>{Object.keys(r).forEach(s=>{e===s&&(this.disabledObj[e+"_isDisabled"]=!0,this.form[e]=r[s]),"source_table"===s&&(this.form["source_table"]=r[s]),"source_id"===s&&(this.form["source_id"]=r[s]),"source_user_id"===s&&(this.form["source_user_id"]=r[s])})}),this.form["repair_date"]&&-1===this.form["repair_date"].indexOf("-")&&(this.form["repair_date"]=this.$toTime(parseInt(this.form["repair_date"]),"yyyy-MM-dd")),$.db.del("form"),e},get_obj_after(e,r){"0000-00-00"==e.result.obj["repair_date"]&&(e.result.obj["repair_date"]=null),parseInt(e.result.obj["repair_date"])>9999&&(e.result.obj["repair_date"]=this.$toTime(parseInt(e.result.obj["repair_date"]),"yyyy-MM-dd"))},async submit(e,r){e||(e=this.form);var s,t=this.events("submit_before",Object.assign({},e))||e,a=await this.events("submit_check",t);return a?this.$toast(a,"danger"):s=this.events("submit_main",t,r),s},submit_check(e){return e.repair_date?null:"报修日期不能为空"},is_view(){var e=!1;return e||(e=this.$check_action("/repair_record/table","add"),console.log(e?"你有表格添加权限视作有添加权限":"你没有表格添加权限")),e||(e=this.$check_action("/repair_record/table","set"),console.log(e?"你有表格添加权限视作有修改权限":"你没有表格修改权限")),e||(e=this.$check_action("/repair_record/view","add"),console.log(e?"你有视图添加权限视作有添加权限":"你没有视图添加权限")),e||(e=this.$check_action("/repair_record/view","set"),console.log(e?"你有视图修改权限视作有修改权限":"你没有视图修改权限")),e||(e=this.$check_action("/repair_record/view","get"),console.log(e?"你有视图查询权限视作有查询权限":"你没有视图查询权限")),console.log(e?"具有当前页面的查看权，请注意这不代表你有字段的查看权":"无权查看当前页，请注意即便有字段查询权限没有页面查询权限也不行"),e},uploadimg(e){this.uploadFile(e.file,"avatar")}},created(){this.get_list_user_ordinary_user()}},d=c,n=(s("9c30"),s("0b56")),p=Object(n["a"])(d,_,l,!1,null,null,null),u=p.exports,m={data(){return{}},mounted(){},methods:{},components:{list_admin_menu_user:i["a"],view_repair_record:u}},f=m,h=(s("44cb"),Object(n["a"])(f,t,a,!1,null,"17500d22",null));r["default"]=h.exports},"44cb":function(e,r,s){"use strict";s("99c9")},"73cb":function(e,r,s){"use strict";s("0243")},"75aa":function(e,r,s){},"99c9":function(e,r,s){},"9c30":function(e,r,s){"use strict";s("75aa")},bc88:function(e,r,s){"use strict";var t=function(){var e=this,r=e._self._c;return r("div",{staticClass:"list_menu diy_menu"},[r("router-link",{staticClass:"menu_item",class:{selected:"/user_center/index"===this.$route.path},attrs:{to:"/user_center/index"}},[r("span",{staticClass:"left_span"},[e._v("个人首页")]),r("span",{staticClass:"right_span"},[r("b-icon",{attrs:{icon:"house-fill"}})],1)]),e.$check_action("/ordinary_user/table","get")?r("router-link",{staticClass:"menu_item",class:{selected:"/ordinary_user/table"===this.$route.path},attrs:{to:"/ordinary_user/table"}},[r("span",{staticClass:"left_span"},[e._v("普通用户")]),r("span",{staticClass:"right_span"},[r("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),e.$check_action("/type_of_repair_report/table","get")?r("router-link",{staticClass:"menu_item",class:{selected:"/type_of_repair_report/table"===this.$route.path},attrs:{to:"/type_of_repair_report/table"}},[r("span",{staticClass:"left_span"},[e._v("报修类型")]),r("span",{staticClass:"right_span"},[r("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),e.$check_action("/application_for_repair/table","get")?r("router-link",{staticClass:"menu_item",class:{selected:"/application_for_repair/table"===this.$route.path},attrs:{to:"/application_for_repair/table"}},[r("span",{staticClass:"left_span"},[e._v("报修申请")]),r("span",{staticClass:"right_span"},[r("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),e.$check_action("/repair_record/table","get")?r("router-link",{staticClass:"menu_item",class:{selected:"/repair_record/table"===this.$route.path},attrs:{to:"/repair_record/table"}},[r("span",{staticClass:"left_span"},[e._v("报修记录")]),r("span",{staticClass:"right_span"},[r("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),e.$check_action("/exchange_forum/table","get")?r("router-link",{staticClass:"menu_item",class:{selected:"/exchange_forum/table"===this.$route.path},attrs:{to:"/exchange_forum/table"}},[r("span",{staticClass:"left_span"},[e._v("交流论坛")]),r("span",{staticClass:"right_span"},[r("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),e.$check_action("/message/table","get")?r("router-link",{staticClass:"menu_item",class:{selected:"/message/table"===this.$route.path},attrs:{to:"/message/table"}},[r("span",{staticClass:"left_span"},[e._v(e._s(e.$page_title("/message/table")||"在线留言"))]),r("span",{staticClass:"right_span"},[r("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),e.$check_action("/collect/list","get")?r("router-link",{staticClass:"menu_item",class:{selected:"/user/collect"===this.$route.path},attrs:{to:"/user/collect"}},[r("span",{staticClass:"left_span"},[e._v("收藏")]),r("span",{staticClass:"right_span"},[r("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),e.$check_action("/comment/table","get")?r("router-link",{staticClass:"menu_item",class:{selected:"/comment/table"===this.$route.path},attrs:{to:"/comment/table"}},[r("span",{staticClass:"left_span"},[e._v("评论管理")]),r("span",{staticClass:"right_span"},[r("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e()],1)},a=[],i=s("c6e7"),_={mixins:[i["a"]],data(){return{}},mounted(){},methods:{},components:{}},l=_,o=(s("73cb"),s("0b56")),c=Object(o["a"])(l,t,a,!1,null,"e2410ac8",null);r["a"]=c.exports}}]);