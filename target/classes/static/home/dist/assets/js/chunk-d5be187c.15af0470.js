(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d5be187c"],{8694:function(e,r,i){"use strict";i("991d")},"991d":function(e,r,i){},a2a1:function(e,r,i){"use strict";i.r(r);var t=function(){var e=this,r=e._self._c;return r("div",{staticClass:"diy_edit page_application_for_repair",attrs:{id:"application_for_repair_edit"}},[r("div",{staticClass:"warp"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row diy_edit_content_box"},[e.$check_field("set","ordinary_user")||e.$check_field("add","ordinary_user")||e.$check_field("get","ordinary_user")?r("div",{staticClass:"form-item col-12 col-md-6"},[e._m(0),r("div",{staticClass:"diy_field diy_down"},[e.form["ordinary_user"]&&e.$check_field("set","ordinary_user")||!e.form["ordinary_user"]&&e.$check_field("add","ordinary_user")?r("select",{directives:[{name:"model",rawName:"v-model",value:e.form["ordinary_user"],expression:"form['ordinary_user']"}],attrs:{id:"form_ordinary_user",disabled:e.disabledObj["ordinary_user_isDisabled"]},on:{change:function(r){var i=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){var r="_value"in e?e._value:e.value;return r}));e.$set(e.form,"ordinary_user",r.target.multiple?i:i[0])}}},e._l(e.list_user_ordinary_user,(function(i){return r("option",{domProps:{value:i["user_id"]}},[e._v(" "+e._s(i["nickname"]+"-"+i["username"])+" ")])})),0):e.$check_field("get","ordinary_user")?r("span",[e._v(e._s(e.get_user_info("ordinary_user",e.form["ordinary_user"])))]):e._e()])]):e._e(),e.$check_field("set","user_name")||e.$check_field("add","user_name")||e.$check_field("get","user_name")?r("div",{staticClass:"form-item col-12 col-md-6"},[e._m(1),r("div",{staticClass:"diy_field diy_text"},[e.form["user_name"]&&e.$check_field("set","user_name")||!e.form["user_name"]&&e.$check_field("add","user_name")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.form["user_name"],expression:"form['user_name']"}],attrs:{type:"text",id:"form_user_name",placeholder:"请输入用户姓名",disabled:e.disabledObj["user_name_isDisabled"]},domProps:{value:e.form["user_name"]},on:{input:function(r){r.target.composing||e.$set(e.form,"user_name",r.target.value)}}}):e.$check_field("get","user_name")?r("span",[e._v(e._s(e.form["user_name"]))]):e._e()])]):e._e(),e.$check_field("set","user_phone")||e.$check_field("add","user_phone")||e.$check_field("get","user_phone")?r("div",{staticClass:"form-item col-12 col-md-6"},[e._m(2),r("div",{staticClass:"diy_field diy_text"},[e.form["user_phone"]&&e.$check_field("set","user_phone")||!e.form["user_phone"]&&e.$check_field("add","user_phone")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.form["user_phone"],expression:"form['user_phone']"}],attrs:{type:"text",id:"form_user_phone",placeholder:"请输入用户电话",disabled:e.disabledObj["user_phone_isDisabled"]},domProps:{value:e.form["user_phone"]},on:{input:function(r){r.target.composing||e.$set(e.form,"user_phone",r.target.value)}}}):e.$check_field("get","user_phone")?r("span",[e._v(e._s(e.form["user_phone"]))]):e._e()])]):e._e(),e.$check_field("set","repair_title")||e.$check_field("add","repair_title")||e.$check_field("get","repair_title")?r("div",{staticClass:"form-item col-12 col-md-6"},[e._m(3),r("div",{staticClass:"diy_field diy_text"},[e.form["repair_title"]&&e.$check_field("set","repair_title")||!e.form["repair_title"]&&e.$check_field("add","repair_title")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.form["repair_title"],expression:"form['repair_title']"}],attrs:{type:"text",id:"form_repair_title",placeholder:"请输入报修标题",disabled:e.disabledObj["repair_title_isDisabled"]},domProps:{value:e.form["repair_title"]},on:{input:function(r){r.target.composing||e.$set(e.form,"repair_title",r.target.value)}}}):e.$check_field("get","repair_title")?r("span",[e._v(e._s(e.form["repair_title"]))]):e._e()])]):e._e(),e.$check_field("set","type_of_repair_report")||e.$check_field("add","type_of_repair_report")||e.$check_field("get","type_of_repair_report")?r("div",{staticClass:"form-item col-12 col-md-6"},[e._m(4),r("div",{staticClass:"diy_field diy_down"},[e.form["type_of_repair_report"]&&e.$check_field("set","type_of_repair_report")||!e.form["type_of_repair_report"]&&e.$check_field("add","type_of_repair_report")?r("select",{directives:[{name:"model",rawName:"v-model",value:e.form["type_of_repair_report"],expression:"form['type_of_repair_report']"}],attrs:{id:"form_type_of_repair_report"},on:{change:function(r){var i=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){var r="_value"in e?e._value:e.value;return r}));e.$set(e.form,"type_of_repair_report",r.target.multiple?i:i[0])}}},e._l(e.list_type_of_repair_report,(function(i){return r("option",{domProps:{value:i["type_of_repair_report"]}},[e._v(" "+e._s(i["type_of_repair_report"])+" ")])})),0):e.$check_field("get","type_of_repair_report")?r("span",[e._v(e._s(e.form["type_of_repair_report"]))]):e._e()])]):e._e(),e.$check_field("set","number_of_repair_reports")||e.$check_field("add","number_of_repair_reports")||e.$check_field("get","number_of_repair_reports")?r("div",{staticClass:"form-item col-12 col-md-6"},[e._m(5),r("div",{staticClass:"diy_field diy_down"},[e.form["number_of_repair_reports"]&&e.$check_field("set","number_of_repair_reports")||!e.form["number_of_repair_reports"]&&e.$check_field("add","number_of_repair_reports")?r("select",{directives:[{name:"model",rawName:"v-model",value:e.form["number_of_repair_reports"],expression:"form['number_of_repair_reports']"}],attrs:{id:"form_number_of_repair_reports"},on:{change:function(r){var i=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){var r="_value"in e?e._value:e.value;return r}));e.$set(e.form,"number_of_repair_reports",r.target.multiple?i:i[0])}}},e._l(e.list_number_of_repair_reports,(function(i){return r("option",{domProps:{value:i}},[e._v(" "+e._s(i)+" ")])})),0):e.$check_field("get","number_of_repair_reports")?r("span",[e._v(e._s(e.form["number_of_repair_reports"]))]):e._e()])]):e._e(),e.$check_field("set","repair_picture")||e.$check_field("add","repair_picture")||e.$check_field("get","repair_picture")?r("div",{staticClass:"form-item col-12 col-md-6"},[e._m(6),r("input",{staticStyle:{display:"none"},attrs:{type:"file",disabled:e.disabledObj["repair_picture_isDisabled"],id:"form_img_repair_picture",title:"repair_picture"},on:{change:function(r){return e.change_file(r.target.files,"repair_picture")}}}),e.form["repair_picture"]&&e.$check_field("set","repair_picture")?r("div",{staticClass:"diy_field diy_img"},[r("label",{attrs:{for:"form_img_repair_picture"}},[r("img",{attrs:{src:e.$fullUrl(e.form["repair_picture"])}})])]):!e.form["repair_picture"]&&e.$check_field("add","repair_picture")?r("div",{staticClass:"diy_field diy_img"},[e._m(7)]):e.$check_field("get","repair_picture")?r("div",{staticClass:"diy_field diy_img"},[r("img",{attrs:{src:e.$fullUrl(e.form["repair_picture"])}})]):e._e()]):e._e(),e.$check_field("set","repair_address")||e.$check_field("add","repair_address")||e.$check_field("get","repair_address")?r("div",{staticClass:"form-item col-12 col-md-6"},[e._m(8),r("div",{staticClass:"diy_field diy_desc"},[e.form["repair_address"]&&e.$check_field("set","repair_address")||!e.form["repair_address"]&&e.$check_field("add","repair_address")?r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form["repair_address"],expression:"form['repair_address']"}],attrs:{id:"form_repair_address",disabled:e.disabledObj["repair_address_isDisabled"]},domProps:{value:e.form["repair_address"]},on:{input:function(r){r.target.composing||e.$set(e.form,"repair_address",r.target.value)}}}):e.$check_field("get","repair_address")?r("span",[e._v(e._s(e.form["repair_address"]))]):e._e()])]):e._e(),e.$check_field("set","fault_description")||e.$check_field("add","fault_description")||e.$check_field("get","fault_description")?r("div",{staticClass:"form-item col-12 col-md-6"},[e._m(9),r("div",{staticClass:"diy_field diy_desc"},[e.form["fault_description"]&&e.$check_field("set","fault_description")||!e.form["fault_description"]&&e.$check_field("add","fault_description")?r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form["fault_description"],expression:"form['fault_description']"}],attrs:{id:"form_fault_description",disabled:e.disabledObj["fault_description_isDisabled"]},domProps:{value:e.form["fault_description"]},on:{input:function(r){r.target.composing||e.$set(e.form,"fault_description",r.target.value)}}}):e.$check_field("get","fault_description")?r("span",[e._v(e._s(e.form["fault_description"]))]):e._e()])]):e._e(),e.$check_examine()?r("div",{staticClass:"form-item col-12 col-md-6"},[e._m(10),e.$check_action("/application_for_repair/edit","examine")?r("div",{staticClass:"diy_field diy_select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.form["examine_state"],expression:"form['examine_state']"}],on:{change:function(r){var i=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){var r="_value"in e?e._value:e.value;return r}));e.$set(e.form,"examine_state",r.target.multiple?i:i[0])}}},[r("option",{attrs:{value:"未审核"}},[e._v(" 未审核 ")]),r("option",{attrs:{value:"已通过"}},[e._v(" 已通过 ")]),r("option",{attrs:{value:"未通过"}},[e._v(" 未通过 ")])])]):r("div",{staticClass:"diy_field diy_text"},[r("span",[e._v(" "+e._s(e.form["examine_state"])+" ")])])]):e._e(),e.$check_examine()?r("div",{staticClass:"form-item col-12 col-md-6"},[e._m(11),e.$check_action("/application_for_repair/edit","examine")?r("div",{staticClass:"diy_field diy_desc"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form["examine_reply"],expression:"form['examine_reply']"}],domProps:{value:e.form["examine_reply"]},on:{input:function(r){r.target.composing||e.$set(e.form,"examine_reply",r.target.value)}}})]):r("div",{staticClass:"diy_field diy_text"},[r("span",[e._v(" "+e._s(e.form["examine_reply"])+" ")])])]):e._e()]),r("div",{staticClass:"diy_edit_submit_box row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"btn_box"},[r("button",{staticClass:"btn_submit",on:{click:function(r){return e.submit()}}},[e._v("提交")])])])])])])])},a=[function(){var e=this,r=e._self._c;return r("div",{staticClass:"diy_title"},[r("span",[e._v(" 普通用户: ")])])},function(){var e=this,r=e._self._c;return r("div",{staticClass:"diy_title"},[r("span",[e._v(" 用户姓名: ")])])},function(){var e=this,r=e._self._c;return r("div",{staticClass:"diy_title"},[r("span",[e._v(" 用户电话: ")])])},function(){var e=this,r=e._self._c;return r("div",{staticClass:"diy_title"},[r("span",[e._v(" 报修标题: ")])])},function(){var e=this,r=e._self._c;return r("div",{staticClass:"diy_title"},[r("span",[e._v(" 报修类型: ")])])},function(){var e=this,r=e._self._c;return r("div",{staticClass:"diy_title"},[r("span",[e._v(" 报修次数: ")])])},function(){var e=this,r=e._self._c;return r("div",{staticClass:"diy_title"},[r("span",[e._v(" 报修图片: ")])])},function(){var e=this,r=e._self._c;return r("label",{attrs:{for:"form_img_repair_picture"}},[r("div",{staticClass:"btn_add_img"},[r("span",[e._v("+")])])])},function(){var e=this,r=e._self._c;return r("div",{staticClass:"diy_title"},[r("span",[e._v(" 报修地址: ")])])},function(){var e=this,r=e._self._c;return r("div",{staticClass:"diy_title"},[r("span",[e._v(" 故障描述: ")])])},function(){var e=this,r=e._self._c;return r("div",{staticClass:"diy_title"},[r("span",[e._v(" 审核状态: ")])])},function(){var e=this,r=e._self._c;return r("div",{staticClass:"diy_title"},[r("span",[e._v(" 审核回复: ")])])}],s=i("c6e7"),_={mixins:[s["a"]],components:{},data(){return{url_get_obj:"~/api/application_for_repair/get_obj?",url_add:"~/api/application_for_repair/add?",url_set:"~/api/application_for_repair/set?",oauth:{signIn:!0,user_group:[]},query:{ordinary_user:0,user_name:"",user_phone:"",repair_title:"",type_of_repair_report:"",number_of_repair_reports:"",repair_picture:"",repair_address:"",fault_description:"",application_for_repair_id:0},obj:{ordinary_user:0,user_name:"",user_phone:"",repair_title:"",type_of_repair_report:"",number_of_repair_reports:"",repair_picture:"",repair_address:"",fault_description:"",examine_state:"未审核",examine_reply:"",application_for_repair_id:0},form:{ordinary_user:0,user_name:"",user_phone:"",repair_title:"",type_of_repair_report:"",number_of_repair_reports:"",repair_picture:"",repair_address:"",fault_description:"",examine_state:"未审核",examine_reply:"",application_for_repair_id:0},disabledObj:{ordinary_user_isDisabled:!1,user_name_isDisabled:!1,user_phone_isDisabled:!1,repair_title_isDisabled:!1,type_of_repair_report_isDisabled:!1,number_of_repair_reports_isDisabled:!1,repair_picture_isDisabled:!1,repair_address_isDisabled:!1,fault_description_isDisabled:!1},list_user_ordinary_user:[],list_type_of_repair_report:[""],list_number_of_repair_reports:["1"],field:"application_for_repair_id"}},methods:{formatDateValue(e){const r=new Date(e);return`${r.getFullYear()}-${(r.getMonth()+1).toString().padStart(2,"0")}-${r.getDate().toString().padStart(2,"0")}`},async submit(e,r){e||(e=this.form);var i,t=this.events("submit_before",Object.assign({},e))||e,a=await this.events("submit_check",t);return a?this.$toast(a,"danger"):i=this.events("submit_main",t,r),i},submit_check(e){return null},async get_list_user_ordinary_user(){var e=await this.$get("~/api/user/get_list?user_group=普通用户");e.result&&e.result.list?this.list_user_ordinary_user=e.result.list:e.error&&console.error(e.error)},async get_user_session_ordinary_user(){var e=this,r=await this.$get("~/api/user_group/get_obj?name=普通用户");if(r.result&&r.result.obj){var i=r.result.obj.source_table,t=e.$store.state.user.user_id;if(t){var a="~/api/"+i+"/get_obj?";this.$get(a,{user_id:e.$store.state.user.user_id},(function(r){if(r.result&&r.result.obj){var i=[];for(let e in r.result.obj)i.push(e);var a=[];for(let r in e.form)a.push(r);e.form["ordinary_user"]=t,e.disabledObj["ordinary_user_isDisabled"]=!0;for(var s=0;s<i.length;s++)if("examine_state"!==i[s]&&"examine_reply"!==i[s])for(var _=0;_<a.length;_++)if(i[s]===a[_]&&"ordinary_user"!==i[s]){e.form[a[_]]=r.result.obj[i[s]],e.disabledObj[a[_]+"_isDisabled"]=!0;break}}}))}}else r.error&&console.error(r.error)},async get_list_type_of_repair_report(){var e=await this.$get("~/api/type_of_repair_report/get_list?");e.result&&e.result.list?this.list_type_of_repair_report=e.result.list:e.error&&console.error(e.error)},get_user_info(e,r){var i=null;"ordinary_user"==e&&(i=this.list_user_ordinary_user.getObj({user_id:r}));var t="";return i&&(t=i.nickname+"-"+i.username),t},change_file(e,r){var i=new FormData;i.append("file",e[0]),this.$post("~/api/application_for_repair/upload?",i,e=>{e.result?this.form[r]=e.result.url:e.error&&this.$toast(e.error.message)})},change_file_multiple(e,r){let i=this;for(var t=new FormData,a=0;a<e.length;a++)t.set("file",e[a]),i.$post("~/api/application_for_repair/upload?",t,e=>{e.result?i.form[r].length>0?i.form[r].push(e.result.url):i.form[r]=[e.result.url]:e.error&&i.$toast(e.error.message)})},get_obj_before(e){var r=$.db.get("form");if(r){var i=[];for(let e in r)i.push(e);var t=[];for(let e in this.form)t.push(e);for(var a=0;a<i.length;a++)if("examine_state"!==i[a]&&"examine_reply"!==i[a]){for(var s=0;s<t.length;s++)if(t[s]===i[a]){this.form[t[s]]=r[i[a]],this.obj[t[s]]=r[i[a]],this.disabledObj[t[s]+"_isDisabled"]=!0;break}"source_table"===i[a]&&(this.form["source_table"]=r[i[a]]),"source_id"===i[a]&&(this.form["source_id"]=r[i[a]]),"source_user_id"===i[a]&&(this.form["source_user_id"]=r[i[a]])}}return $.db.del("form"),e},get_obj_after(e,r){r&&r(e)}},created(){this.get_user_session_ordinary_user(),this.get_list_user_ordinary_user(),this.get_list_type_of_repair_report()}},o=_,l=(i("8694"),i("0b56")),d=Object(l["a"])(o,t,a,!1,null,null,null);r["default"]=d.exports}}]);