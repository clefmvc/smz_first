(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c87c581"],{"0062":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page_message",attrs:{id:"message_index"}},[e("div",{staticClass:"warp"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"card_form_message flex_cc"},[e("div",{staticClass:"form_message"},[e("b-form",[e("b-form-group",{attrs:{id:"input-group-2",label:"标题:","label-for":"input-2",state:t.validation_title,"invalid-feedback":"不能为空","valid-feedback":"校验通过"}},[e("b-form-input",{attrs:{id:"input-2",type:"text",placeholder:"请输入标题",trim:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("b-form-group",{attrs:{id:"input-group-1",label:"用户名:","label-for":"input-1"}},[e("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"用户名",trim:"",disabled:t.disabledObj.nickname_disabled},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),e("b-form-group",{attrs:{id:"input-group-2",label:"留言内容:","label-for":"input-2",state:t.validation_content,"invalid-feedback":"最多12个字符","valid-feedback":""}},[e("b-form-textarea",{attrs:{id:"textarea",placeholder:"请输入你的留言...",rows:"3","max-rows":"6"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),e("div",{staticClass:"btns_bottom"},[e("div",{staticClass:"btn_item",on:{click:function(e){return t.submit()}}},[e("span",[t._v("提交留言")])])])],1)],1)])])])])])])},s=[],r=i("c6e7"),n={mixins:[r["a"]],data(){return{form:{title:"",nickname:"",content:"",user_id:0,avatar:""},disabledObj:{nickname_disabled:!1}}},created(){setTimeout(()=>{this.get_user()},500)},methods:{get_user(){let t=this.$store.state.user;t&&t.user_id&&(this.form.nickname=t.nickname,this.form.user_id=t.user_id,this.form.avatar=t.avatar,this.disabledObj.nickname_disabled=!0)},async submit(){var t=this.validation_title&&this.validation_content;if(t){var e=await this.filterSensitiveWords(this.form.content);e.length>0?this.$toast("当前消息中包含敏感词: "+e.join(",")):this.$post("~/api/message/add?",this.form,t=>{t.result?this.$router.push("/message/list"):t.error&&this.$toast(t.error.message)})}else this.$toast("输入不合法")}},computed:{validation_title(){var t=this.form.title.length;return t>0},validation_content(){var t=this.form.content.length;return!t||t>1&&t<580}}},o=n,l=(i("6048"),i("0b56")),c=Object(l["a"])(o,a,s,!1,null,"40f53fc2",null);e["default"]=c.exports},"24c3":function(t,e,i){},6048:function(t,e,i){"use strict";i("24c3")}}]);