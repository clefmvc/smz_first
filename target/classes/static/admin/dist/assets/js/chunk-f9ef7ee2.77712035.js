(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f9ef7ee2"],{"2dc7":function(e,r,i){},"2ee8":function(e,r,i){"use strict";i("2dc7")},6440:function(e,r,i){"use strict";i.r(r);var t=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-main",{staticClass:"bg edit_wrap comtable_e"},[e.is_view()?t("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"","label-width":"120px"}},[t("el-row",{staticClass:"row_ce"},[e.$check_field("get","ordinary_user")||e.$check_field("add","ordinary_user")||e.$check_field("set","ordinary_user")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"普通用户",prop:"ordinary_user"}},["管理员"!==e.user_group?t("div",[e._v(" "+e._s(e.get_user_session_ordinary_user(e.form["ordinary_user"]))+" "),e.form["application_for_repair_id"]&&e.$check_field("set","ordinary_user")||!e.form["application_for_repair_id"]&&e.$check_field("add","ordinary_user")?t("el-select",{attrs:{id:"ordinary_user",disabled:e.disabledObj["ordinary_user_isDisabled"]},model:{value:e.form["ordinary_user"],callback:function(r){e.$set(e.form,"ordinary_user",r)},expression:"form['ordinary_user']"}},e._l(e.list_user_ordinary_user,(function(e){return t("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e.$check_field("get","ordinary_user")?t("el-select",{attrs:{id:"ordinary_user",disabled:!0},model:{value:e.form["ordinary_user"],callback:function(r){e.$set(e.form,"ordinary_user",r)},expression:"form['ordinary_user']"}},e._l(e.list_user_ordinary_user,(function(e){return t("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e._e()],1):t("el-select",{attrs:{id:"ordinary_user",disabled:e.disabledObj["ordinary_user_isDisabled"]},model:{value:e.form["ordinary_user"],callback:function(r){e.$set(e.form,"ordinary_user",r)},expression:"form['ordinary_user']"}},e._l(e.list_user_ordinary_user,(function(e){return t("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1)],1)],1):e._e(),e.$check_field("get","user_name")||e.$check_field("add","user_name")||e.$check_field("set","user_name")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"用户姓名",prop:"user_name"}},[e.form["application_for_repair_id"]&&e.$check_field("set","user_name")||!e.form["application_for_repair_id"]&&e.$check_field("add","user_name")?t("el-input",{attrs:{id:"user_name",placeholder:"请输入用户姓名",disabled:e.disabledObj["user_name_isDisabled"]},model:{value:e.form["user_name"],callback:function(r){e.$set(e.form,"user_name",r)},expression:"form['user_name']"}}):e.$check_field("get","user_name")?t("div",[e._v(e._s(e.form["user_name"]))]):e._e()],1)],1):e._e(),e.$check_field("get","user_phone")||e.$check_field("add","user_phone")||e.$check_field("set","user_phone")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"用户电话",prop:"user_phone"}},[e.form["application_for_repair_id"]&&e.$check_field("set","user_phone")||!e.form["application_for_repair_id"]&&e.$check_field("add","user_phone")?t("el-input",{attrs:{id:"user_phone",placeholder:"请输入用户电话",disabled:e.disabledObj["user_phone_isDisabled"]},model:{value:e.form["user_phone"],callback:function(r){e.$set(e.form,"user_phone",r)},expression:"form['user_phone']"}}):e.$check_field("get","user_phone")?t("div",[e._v(e._s(e.form["user_phone"]))]):e._e()],1)],1):e._e(),e.$check_field("get","repair_title")||e.$check_field("add","repair_title")||e.$check_field("set","repair_title")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"报修标题",prop:"repair_title"}},[e.form["application_for_repair_id"]&&e.$check_field("set","repair_title")||!e.form["application_for_repair_id"]&&e.$check_field("add","repair_title")?t("el-input",{attrs:{id:"repair_title",placeholder:"请输入报修标题",disabled:e.disabledObj["repair_title_isDisabled"]},model:{value:e.form["repair_title"],callback:function(r){e.$set(e.form,"repair_title",r)},expression:"form['repair_title']"}}):e.$check_field("get","repair_title")?t("div",[e._v(e._s(e.form["repair_title"]))]):e._e()],1)],1):e._e(),e.$check_field("get","type_of_repair_report")||e.$check_field("add","type_of_repair_report")||e.$check_field("set","type_of_repair_report")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"报修类型",prop:"type_of_repair_report"}},[e.form["application_for_repair_id"]&&e.$check_field("set","type_of_repair_report")||!e.form["application_for_repair_id"]&&e.$check_field("add","type_of_repair_report")?t("el-select",{attrs:{id:"type_of_repair_report"},model:{value:e.form["type_of_repair_report"],callback:function(r){e.$set(e.form,"type_of_repair_report",r)},expression:"form['type_of_repair_report']"}},e._l(e.list_type_of_repair_report,(function(e){return t("el-option",{key:e["type_of_repair_report"],attrs:{label:e["type_of_repair_report"],value:e["type_of_repair_report"]}})})),1):e.$check_field("get","type_of_repair_report")?t("div",[e._v(e._s(e.form["type_of_repair_report"]))]):e._e()],1)],1):e._e(),e.$check_field("get","number_of_repair_reports")||e.$check_field("add","number_of_repair_reports")||e.$check_field("set","number_of_repair_reports")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"报修次数",prop:"number_of_repair_reports"}},[e.form["application_for_repair_id"]&&e.$check_field("set","number_of_repair_reports")||!e.form["application_for_repair_id"]&&e.$check_field("add","number_of_repair_reports")?t("el-select",{attrs:{id:"number_of_repair_reports"},model:{value:e.form["number_of_repair_reports"],callback:function(r){e.$set(e.form,"number_of_repair_reports",r)},expression:"form['number_of_repair_reports']"}},e._l(e.list_number_of_repair_reports,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1):e.$check_field("get","number_of_repair_reports")?t("div",[e._v(e._s(e.form["number_of_repair_reports"]))]):e._e()],1)],1):e._e(),e.$check_field("get","repair_picture")||e.$check_field("add","repair_picture")||e.$check_field("set","repair_picture")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"报修图片",prop:"repair_picture"}},[e.form["application_for_repair_id"]&&e.$check_field("set","repair_picture")||!e.form["application_for_repair_id"]&&e.$check_field("add","repair_picture")?t("el-upload",{staticClass:"avatar-uploader",attrs:{disabled:e.disabledObj["repair_picture_isDisabled"],drag:"",accept:"image/gif, image/jpeg, image/png, image/jpg",action:"","http-request":e.upload_repair_picture,"show-file-list":!1}},[e.form["repair_picture"]?t("img",{staticClass:"avatar",attrs:{id:"repair_picture",src:e.$fullUrl(e.form["repair_picture"])}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]):e.$check_field("get","repair_picture")?t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.$fullUrl(e.form["repair_picture"]),"preview-src-list":[e.$fullUrl(e.form["repair_picture"])]}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:i("84f9")}})])]):e._e()],1)],1):e._e(),e.$check_field("get","repair_address")||e.$check_field("add","repair_address")||e.$check_field("set","repair_address")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"报修地址",prop:"repair_address"}},[e.form["application_for_repair_id"]&&e.$check_field("set","repair_address")||!e.form["application_for_repair_id"]&&e.$check_field("add","repair_address")?t("el-input",{attrs:{type:"textarea",id:"repair_address",placeholder:"请输入报修地址",disabled:e.disabledObj["repair_address_isDisabled"]},model:{value:e.form["repair_address"],callback:function(r){e.$set(e.form,"repair_address",r)},expression:"form['repair_address']"}}):e.$check_field("get","repair_address")?t("div",[e._v(e._s(e.form["repair_address"]))]):e._e()],1)],1):e._e(),e.$check_field("get","fault_description")||e.$check_field("add","fault_description")||e.$check_field("set","fault_description")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"故障描述",prop:"fault_description"}},[e.form["application_for_repair_id"]&&e.$check_field("set","fault_description")||!e.form["application_for_repair_id"]&&e.$check_field("add","fault_description")?t("el-input",{attrs:{type:"textarea",id:"fault_description",placeholder:"请输入故障描述",disabled:e.disabledObj["fault_description_isDisabled"]},model:{value:e.form["fault_description"],callback:function(r){e.$set(e.form,"fault_description",r)},expression:"form['fault_description']"}}):e.$check_field("get","fault_description")?t("div",[e._v(e._s(e.form["fault_description"]))]):e._e()],1)],1):e._e(),t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"审核状态",prop:"examine_state"}},[e.form["examine_state"]&&e.$check_examine()||!e.form["examine_state"]&&e.$check_examine()?t("el-select",{attrs:{id:"examine_state",disabled:!0},model:{value:e.form["examine_state"],callback:function(r){e.$set(e.form,"examine_state",r)},expression:"form['examine_state']"}},[t("el-option",{key:"未审核",attrs:{label:"未审核",value:"未审核"}}),t("el-option",{key:"已通过",attrs:{label:"已通过",value:"已通过"}}),t("el-option",{key:"未通过",attrs:{label:"未通过",value:"未通过"}})],1):t("div",[e._v(e._s(e.form["examine_state"]))])],1)],1),t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"审核回复",prop:"examine_reply"}},[e.form["examine_reply"]&&e.$check_examine()||!e.form["examine_reply"]&&e.$check_examine()?t("el-input",{attrs:{id:"examine_reply",placeholder:"请输入审核回复",disabled:!0},model:{value:e.form["examine_reply"],callback:function(r){e.$set(e.form,"examine_reply",r)},expression:"form['examine_reply']"}}):t("div",[e._v(e._s(e.form["examine_reply"]))])],1)],1),e.form["source_user_id"]?e._e():t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"维修记录限次"}},[e.$check_option("/application_for_repair/view","can_limits")?t("el-input",{attrs:{id:"limit_times",placeholder:"维修记录限制次数，0为不限"},model:{value:e.form["repair_record_limit_times"],callback:function(r){e.$set(e.form,"repair_record_limit_times",r)},expression:"form['repair_record_limit_times']"}}):e.$check_action("/application_for_repair/view","get")?t("div",{domProps:{innerHTML:e._s(e.form["repair_record_limit_times"])}}):e._e()],1)],1)],1),t("el-col",{staticClass:"el_form_btn_warp",attrs:{xs:24,sm:12,lg:8}},[e.$check_action("/application_for_repair/view","set")||e.$check_action("/application_for_repair/view","add")||e.$check_option("/application_for_repair/table","examine")?t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submit()}}},[e._v("提交")]),t("el-button",{on:{click:function(r){return e.cancel()}}},[e._v("取消")])],1):t("el-form-item",[t("el-button",{on:{click:function(r){return e.cancel()}}},[e._v("返回")])],1)],1)],1):e._e()],1)},a=[],_=(i("b64b"),i("159b"),i("96cf"),i("1da1")),s=i("c6e7"),o={mixins:[s["a"]],data:function(){return{field:"application_for_repair_id",url_add:"~/api/application_for_repair/add?",url_set:"~/api/application_for_repair/set?",url_get_obj:"~/api/application_for_repair/get_obj?",url_upload:"~/api/application_for_repair/upload?",query:{application_for_repair_id:0},form:{ordinary_user:0,user_name:"",user_phone:"",repair_title:"",type_of_repair_report:"",number_of_repair_reports:"",repair_picture:"",repair_address:"",fault_description:"",examine_state:"未审核",examine_reply:"",application_for_repair_id:0,repair_record_limit_times:1},disabledObj:{ordinary_user_isDisabled:!1,user_name_isDisabled:!1,user_phone_isDisabled:!1,repair_title_isDisabled:!1,type_of_repair_report_isDisabled:!1,number_of_repair_reports_isDisabled:!1,repair_picture_isDisabled:!1,repair_address_isDisabled:!1,fault_description_isDisabled:!1},list_user_ordinary_user:[],group_user_ordinary_user:"",list_type_of_repair_report:[""],list_number_of_repair_reports:["1"]}},methods:{get_list_user_ordinary_user:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$get("~/api/user/get_list?user_group=普通用户");case 2:i=r.sent,i.result&&i.result.list?e.list_user_ordinary_user=i.result.list:i.error&&console.error(i.error);case 4:case"end":return r.stop()}}),r)})))()},get_group_user_ordinary_user:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.form["ordinary_user"]=e.user.user_id,r.next=3,e.$get("~/api/user_group/get_obj?name=普通用户");case 3:i=r.sent,i.result&&i.result.obj?e.group_user_ordinary_user=i.result.obj:i.error&&console.error(i.error);case 5:case"end":return r.stop()}}),r)})))()},get_user_session_ordinary_user:function(e){var r=this,i={user_id:e},t="~/api/"+r.group_user_ordinary_user.source_table+"/get_obj?";this.$get(t,i,(function(i){if(i.result&&i.result.obj){var t=[];for(var a in i.result.obj)t.push(a);var _=[];for(var s in r.form)_.push(s);r.form["ordinary_user"]=e,r.disabledObj["ordinary_user_isDisabled"]=!0;for(var o=0;o<t.length;o++)if("examine_state"!==t[o]&&"examine_reply"!==t[o])for(var l=0;l<_.length;l++)if(t[o]===_[l]){if("ordinary_user"!==t[o]){r.form[_[l]]=i.result.obj[t[o]],r.disabledObj[_[l]+"_isDisabled"]=!0;break}r.disabledObj[_[l]+"_isDisabled"]=!0}}}))},get_user_ordinary_user:function(e){var r=this.list_user_ordinary_user.getObj({user_id:e}),i="";return r&&(i=r.nickname?r.nickname:r.username),i},get_list_type_of_repair_report:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$get("~/api/type_of_repair_report/get_list?");case 2:i=r.sent,i.result&&i.result.list?e.list_type_of_repair_report=i.result.list:i.error&&console.error(i.error);case 4:case"end":return r.stop()}}),r)})))()},upload_repair_picture:function(e){this.uploadFile(e.file,"repair_picture")},get_obj_before:function(e){var r=this,i="";return this.form&&i&&Object.keys(this.form).forEach((function(e){Object.keys(i).forEach((function(t){e===t&&(r.disabledObj[e+"_isDisabled"]=!0,r.form[e]=i[t]),"source_table"===t&&(r.form["source_table"]=i[t]),"source_id"===t&&(r.form["source_id"]=i[t]),"source_user_id"===t&&(r.form["source_user_id"]=i[t])}))})),$.db.del("form"),e},get_obj_after:function(e,r){},submit:function(e,r){var i=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var a,_,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e||(e=i.form),a=i.events("submit_before",Object.assign({},e))||e,t.next=4,i.events("submit_check",a);case 4:return _=t.sent,_?i.$toast(_,"danger"):s=i.events("submit_main",a,r),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})))()},submit_check:function(e){return null},is_view:function(){var e=!1;return e||(e=this.$check_action("/application_for_repair/table","add"),console.log(e?"你有表格添加权限视作有添加权限":"你没有表格添加权限")),e||(e=this.$check_action("/application_for_repair/table","set"),console.log(e?"你有表格添加权限视作有修改权限":"你没有表格修改权限")),e||(e=this.$check_action("/application_for_repair/view","add"),console.log(e?"你有视图添加权限视作有添加权限":"你没有视图添加权限")),e||(e=this.$check_action("/application_for_repair/view","set"),console.log(e?"你有视图修改权限视作有修改权限":"你没有视图修改权限")),e||(e=this.$check_action("/application_for_repair/view","get"),console.log(e?"你有视图查询权限视作有查询权限":"你没有视图查询权限")),console.log(e?"具有当前页面的查看权，请注意这不代表你有字段的查看权":"无权查看当前页，请注意即便有字段查询权限没有页面查询权限也不行"),e},uploadimg:function(e){this.uploadFile(e.file,"avatar")}},created:function(){this.get_list_user_ordinary_user(),this.get_group_user_ordinary_user(),this.get_list_type_of_repair_report()}},l=o,p=(i("2ee8"),i("2877")),n=Object(p["a"])(l,t,a,!1,null,null,null);r["default"]=n.exports}}]);